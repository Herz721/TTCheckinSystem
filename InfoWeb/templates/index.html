<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trojan Tech Info</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="./js/index.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  </head>

  <body>
    <form onsubmit="return submitInfo()">
      <label>Please Register with Your Cellphone:</label><br />
      <div class="Select">
        {{form.csrf_token}}
        <div class="form-group">
          <label for="dpt"> Department:</label>
          {{ form.dpt(class="form-control")}}
        </div>
        <div class="form-group">
          <label for="nm"> Name:</label>
          {{ form.name(class="form-control")}}
        </div>
      </div>
      <label>Device:</label><br />
      <select id="device">
        <optgroup label="Device">
          <option disable selected>Your Device</option>
          <option value="phone">Cellphone</option>
          <option value="pad">Pad</option>
          <option value="pc">Laptop</option>
          <option value="other">Other</option>
        </optgroup></select
      ><br /><br />
      <label>Device Name:</label>
      <br />
      <input
        type="text"
        id="device_name"
        autofocus
        name="device_name"
        placeholder="Name"
      />
      <br />
      <input type="submit" value="Register" />
    </form>
    <script>
      dept_select = document.getElementById("department");
      name_select = document.getElementById("name");

      dept_select.onchange = function () {
        department = dept_select.value;
        fetch("name/" + dept).then(function (response) {
          response.json().then(function (data) {
            optionHTML = "";
            for (name of data.namedept) {
              optionHTML +=
                '<option value="' +
                nameList.id +
                '">' +
                state.name +
                "</option>";
            }
            name_select.innerHTML = optionHTML;
          });
        });
      };

      document.querySelector("form").addEventListener("submit", feedback);
    </script>
  </body>
</html>
